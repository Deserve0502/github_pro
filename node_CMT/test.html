<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        li {
            border: 1px solid red;
            float: left;
            list-style-type: none;
            list-style: none;
            padding: 5px;
        }
    </style>
</head>

<body>
    <ul>

    </ul>
</body>

</html>
<script>
    // let ls = localStorage;
    // ls.setItem(lsPage, 1);


function getPagination(ul,li,lsPage,endPage){
    // let endPage = 21; //最终页数
    // let ul = document.querySelector("ul");
    let arr = ['<', '1', '2', '3', '4', '5', '...', '>']; //起始样式
    let endarr = ['<', '...', '19', '20', '21', '>']

    let str = '';
    // let li = [];
    // li = document.querySelectorAll("li");
    Array.prototype.insert = function (index, item) {
        this.splice(index, 0, item);
    };
    buildPa();
    liclick();
    getcolor();

    function buildPa() {
        for (let j = 0; j < arr.length; j++) {
            str += `
                <li>${arr[j]}</li>
            `
        }
        ul.innerHTML = str;
        str = '';
        li = document.querySelectorAll("li");
        liclick();
    }


    function buildArr() {
        console.log(arr)
        let chazhi = -2;
        for (let i = 2; i < arr.length - 2; i++) {
            arr[i] = Number(ls.getItem(lsPage)) + Number(chazhi);
            chazhi++;
        }



    }

    function liclick() {
        for (let i = 0; i < li.length; i++) {
            li[i].onclick = function () {

                ls.setItem(lsPage, li[i].innerHTML);

                if (li[i].innerHTML >= 4 && li[i].innerHTML <= endPage) {
                    console.log(arr[2])
                    if (ls.getItem(lsPage) == (endPage - 2)) {

                        buildArr();
                        arr = ['<', '...', '19', '20', '21', '>'];
                        arr.insert(2, 18);
                        arr.insert(2, 17);
                        buildPa();




                    } else if (ls.getItem(lsPage) == (endPage - 1)) {

                        buildArr();
                        arr = ['<', '...', '19', '20', '21', '>'];
                        arr.insert(2, 18);
                        buildPa();


                    } else if (ls.getItem(lsPage) == (endPage)) {
                        buildArr();
                        arr = ['<', '...', '19', '20', '21', '>'];

                        buildPa();
                    } else {
                        arr.insert(1, '...');
                        console.log(111, arr)
                        buildArr();
                        arr[7] = '...';
                        arr[8] = '>'
                        buildPa();
                        arr.splice(6, 1);
                    }
                } else if (li[i].innerHTML < 4) {
                    arr = ['<', '1', '2', '3', '4', '5', '...', '>'];
                    buildPa();
                }
                getcolor();

            }
            li[0].onclick = function () {
                ls.setItem(lsPage, 1);
                arr = ['<', '1', '2', '3', '4', '5', '...', '>'];
                buildPa();
                li[1].style.color = 'red';
            }
            li[arr.length - 1].onclick = function () {
                ls.setItem(lsPage, 21);
                buildArr();
                arr = ['<', '...', '19', '20', '21', '>'];

                buildPa();
                li[5].style.color = 'red';
            }

        }
    }

    function getcolor() {
        for (let j = 0; j < li.length; j++) {
            li[j].style.color = 'black';
            console.log('wuwuw', li[j].innerHTML, ls.getItem(lsPage))

            console.log(888)
            if (li[j].innerText == ls.getItem(lsPage)) {
                console.log(typeof li[j].innerHTML, typeof ls.getItem(lsPage))
                li[j].style.color = 'red'
            }
        }
    }
}
</script>