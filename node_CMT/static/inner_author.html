<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/inner.css">
</head>

<body>
    <div class="list_container author_con">
        <!-- <div class="list_header">
            作者
        </div>
        <div class="author_section">
       <div>
           <img src="../img/peo1.jpg">
           <span>作者名字</span>
       </div>
       <p>
           积分：<span>355</span>
       </p>
       <p>
           "好难不会做"
       </p>
    </div> -->
    </div>
</body>

</html>
<script src="../js/common.js"></script>
<script>
    let oauthorCon = document.querySelector(".author_con");
    let ls = localStorage;
    document.addEventListener('DOMContentLoaded', function () {
        let width = oauthorCon.clientWidth
        let height = oauthorCon.clientHeight
        window.parent.postMessage({
            oiframeAuthorHeight: 179,
            oiframeAuthorWidth: width
        }, '*')
    }, false);
    let url = 'https://cnodejs.org/api/v1/user/' + ls.getItem("author");
    let autStr;
    ajax({
        'url': url,
        'type': 'get',
        success: function (data) {
            let authorJson = JSON.parse(data).data;
            console.log(authorJson);
            autStr = `
            <div class="list_header">
         作者
        </div>
        <div class="author_section">
       <div>
           <img src="../img/peo1.jpg">
           <span>   ${authorJson.loginname}</span>
       </div>
       <p>
           积分：<span>${authorJson.score}</span>
       </p>
       <p>
           "好难不会做"
       </p>
    </div>
            
            `
            oauthorCon.innerHTML = autStr;
        }
    })
</script>